{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst key = '44800078-24df89d06f24ed99fe7b62add';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function getPhotos(query, page = 1) {\n  const params = {\n    key,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page,\n  };\n\n  const response = await axios.get(BASE_URL, { params });\n  return response.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  animationSpeed: 350,\n});\n\nexport function renderCards(cards, galleryEl) {\n  const markup = cards\n    .map(\n      ({ likes, views, comments, downloads, webformatURL, largeImageURL }) => `\n        <a href=\"${largeImageURL}\" class=\"card\">\n          <div class=\"card-img-top\">\n            <img src=\"${webformatURL}\" alt=\"Image\">\n          </div>\n          <div class=\"card-body\">\n            <p class=\"card-title\">Likes: ${likes}</p>\n            <p class=\"card-text\">Views: ${views}</p>\n            <p class=\"card-text\">Comments: ${comments}</p>\n            <p class=\"card-text\">Downloads: ${downloads}</p>\n          </div>\n        </a>`\n    )\n    .join('');\n\n  galleryEl.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\nexport function clearGallery(galleryEl) {\n  galleryEl.innerHTML = '';\n}\n\nexport function showLoader(loaderEl) {\n  loaderEl.classList.remove('hidden');\n}\n\nexport function hideLoader(loaderEl) {\n  loaderEl.classList.add('hidden');\n}\n\nexport function showLoadMoreButton(buttonEl) {\n  buttonEl.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton(buttonEl) {\n  buttonEl.classList.add('hidden');\n}\n\nexport function showError(message) {\n  iziToast.error({\n    title: 'Error',\n    message,\n  });\n}\n","import { getPhotos } from './js/pixabay-api';\nimport {\n  renderCards,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n  showError,\n} from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet query = '';\nlet page = 1;\nlet totalHits = 0;\n\nconst galleryEl = document.querySelector('.gallery');\nconst searchEl = document.querySelector('.search');\nconst loaderEl = document.querySelector('.loader');\nconst loadMoreButtonEl = document.querySelector('.load-more');\n\nsearchEl.addEventListener('submit', handleSearch);\nloadMoreButtonEl.addEventListener('click', loadMore);\n\nasync function handleSearch(event) {\n  event.preventDefault();\n  query = event.currentTarget.elements.query.value.trim().toLowerCase();\n\n  if (!query) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search term!',\n    });\n    return;\n  }\n\n  page = 1;\n  clearGallery(galleryEl);\n  hideLoadMoreButton(loadMoreButtonEl);\n  showLoader(loaderEl);\n\n  try {\n    const data = await getPhotos(query, page);\n    totalHits = data.totalHits;\n    if (data.hits.length === 0) {\n      throw new Error('No images found');\n    }\n    renderCards(data.hits, galleryEl);\n    showLoadMoreButton(loadMoreButtonEl);\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message:\n        error.message ||\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n  } finally {\n    hideLoader(loaderEl);\n    searchEl.reset();\n  }\n}\n\nasync function loadMore() {\n  page += 1;\n  showLoader(loaderEl);\n\n  try {\n    const data = await getPhotos(query, page);\n    renderCards(data.hits, galleryEl);\n    if (galleryEl.children.length >= totalHits) {\n      hideLoadMoreButton(loadMoreButtonEl);\n      iziToast.info({\n        message: \"Were sorry, but you've reached the end of search results.\",\n      });\n    }\n    smoothScroll();\n  } catch (error) {\n    showError(error.message);\n  } finally {\n    hideLoader(loaderEl);\n  }\n}\n\nfunction smoothScroll() {\n  const { height: cardHeight } =\n    galleryEl.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["key","BASE_URL","getPhotos","query","page","params","axios","lightbox","SimpleLightbox","renderCards","cards","galleryEl","markup","likes","views","comments","downloads","webformatURL","largeImageURL","clearGallery","showLoader","loaderEl","hideLoader","showLoadMoreButton","buttonEl","hideLoadMoreButton","showError","message","totalHits","searchEl","loadMoreButtonEl","handleSearch","loadMore","event","iziToast","data","error","smoothScroll","cardHeight"],"mappings":"+vBAEA,MAAMA,EAAM,qCACNC,EAAW,2BAEV,eAAeC,EAAUC,EAAOC,EAAO,EAAG,CAC/C,MAAMC,EAAS,CACb,IAAAL,EACA,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAAC,CACJ,EAGE,OADiB,MAAME,EAAM,IAAIL,EAAU,CAAE,OAAAI,CAAM,CAAE,GACrC,IAClB,CCfA,MAAME,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,IACd,eAAgB,GAClB,CAAC,EAEM,SAASC,EAAYC,EAAOC,EAAW,CAC5C,MAAMC,EAASF,EACZ,IACC,CAAC,CAAE,MAAAG,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,EAAW,aAAAC,EAAc,cAAAC,CAAa,IAAO;AAAA,mBAC3DA,CAAa;AAAA;AAAA,wBAERD,CAAY;AAAA;AAAA;AAAA,2CAGOJ,CAAK;AAAA,0CACNC,CAAK;AAAA,6CACFC,CAAQ;AAAA,8CACPC,CAAS;AAAA;AAAA,aAGlD,EACA,KAAK,EAAE,EAEVL,EAAU,mBAAmB,YAAaC,CAAM,EAChDL,EAAS,QAAO,CAClB,CAEO,SAASY,EAAaR,EAAW,CACtCA,EAAU,UAAY,EACxB,CAEO,SAASS,EAAWC,EAAU,CACnCA,EAAS,UAAU,OAAO,QAAQ,CACpC,CAEO,SAASC,EAAWD,EAAU,CACnCA,EAAS,UAAU,IAAI,QAAQ,CACjC,CAEO,SAASE,EAAmBC,EAAU,CAC3CA,EAAS,UAAU,OAAO,QAAQ,CACpC,CAEO,SAASC,EAAmBD,EAAU,CAC3CA,EAAS,UAAU,IAAI,QAAQ,CACjC,CAEO,SAASE,EAAUC,EAAS,CACjC,SAAS,MAAM,CACb,MAAO,QACP,QAAAA,CACJ,CAAG,CACH,CC3CA,IAAIxB,EAAQ,GACRC,EAAO,EACPwB,EAAY,EAEhB,MAAMjB,EAAY,SAAS,cAAc,UAAU,EAC7CkB,EAAW,SAAS,cAAc,SAAS,EAC3CR,EAAW,SAAS,cAAc,SAAS,EAC3CS,EAAmB,SAAS,cAAc,YAAY,EAE5DD,EAAS,iBAAiB,SAAUE,CAAY,EAChDD,EAAiB,iBAAiB,QAASE,CAAQ,EAEnD,eAAeD,EAAaE,EAAO,CAIjC,GAHAA,EAAM,eAAc,EACpB9B,EAAQ8B,EAAM,cAAc,SAAS,MAAM,MAAM,OAAO,cAEpD,CAAC9B,EAAO,CACV+B,EAAS,MAAM,CACb,MAAO,QACP,QAAS,6BACf,CAAK,EACD,MACD,CAED9B,EAAO,EACPe,EAAaR,CAAS,EACtBc,EAAmBK,CAAgB,EACnCV,EAAWC,CAAQ,EAEnB,GAAI,CACF,MAAMc,EAAO,MAAMjC,EAAUC,EAAOC,CAAI,EAExC,GADAwB,EAAYO,EAAK,UACbA,EAAK,KAAK,SAAW,EACvB,MAAM,IAAI,MAAM,iBAAiB,EAEnC1B,EAAY0B,EAAK,KAAMxB,CAAS,EAChCY,EAAmBO,CAAgB,CACpC,OAAQM,EAAO,CACdF,EAAS,MAAM,CACb,MAAO,QACP,QACEE,EAAM,SACN,0EACR,CAAK,CACL,QAAY,CACRd,EAAWD,CAAQ,EACnBQ,EAAS,MAAK,CACf,CACH,CAEA,eAAeG,GAAW,CACxB5B,GAAQ,EACRgB,EAAWC,CAAQ,EAEnB,GAAI,CACF,MAAMc,EAAO,MAAMjC,EAAUC,EAAOC,CAAI,EACxCK,EAAY0B,EAAK,KAAMxB,CAAS,EAC5BA,EAAU,SAAS,QAAUiB,IAC/BH,EAAmBK,CAAgB,EACnCI,EAAS,KAAK,CACZ,QAAS,2DACjB,CAAO,GAEHG,GACD,OAAQD,EAAO,CACdV,EAAUU,EAAM,OAAO,CAC3B,QAAY,CACRd,EAAWD,CAAQ,CACpB,CACH,CAEA,SAASgB,GAAe,CACtB,KAAM,CAAE,OAAQC,CAAY,EAC1B3B,EAAU,kBAAkB,wBAC9B,OAAO,SAAS,CACd,IAAK2B,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}